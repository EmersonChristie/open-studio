"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/./src/lib/middleware/with-tenant.ts":
/*!*******************************************!*\
  !*** ./src/lib/middleware/with-tenant.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   extractTenantFromRequest: () => (/* binding */ extractTenantFromRequest),\n/* harmony export */   withTenant: () => (/* binding */ withTenant)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/.pnpm/next@15.2.0_react-dom@19.0.0_react@19.0.0/node_modules/next/dist/esm/api/server.js\");\n\n/**\n * Extract tenant from request URL\n * This handles tenant resolution from the URL path\n */ function extractTenantFromRequest(request) {\n    const url = request.nextUrl;\n    const pathParts = url.pathname.split('/');\n    // Expected format: /[tenant]/...\n    // The tenant should be the first part of the path after the initial '/'\n    if (pathParts.length > 1 && pathParts[1]) {\n        // Ensure the path is not a system path like _next, api, etc.\n        if (!pathParts[1].startsWith('_') && pathParts[1] !== 'api' && pathParts[1] !== 'favicon.ico') {\n            return pathParts[1];\n        }\n    }\n    // Default tenant for home page or other non-tenant routes\n    return 'demo-gallery';\n}\n/**\n * Tenant middleware function\n * This middleware attaches the tenant ID to the request headers\n * allowing server components to access it.\n */ function withTenant(request) {\n    // Skip tenant resolution for specific routes\n    if (request.nextUrl.pathname.startsWith('/_next') || request.nextUrl.pathname.startsWith('/api') || request.nextUrl.pathname === '/favicon.ico' || request.nextUrl.pathname === '/error' || request.nextUrl.pathname === '/not-found') {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n    }\n    // Skip tenant resolution for specific routes\n    if (request.nextUrl.pathname.startsWith('/_next') || request.nextUrl.pathname.startsWith('/api') || request.nextUrl.pathname === '/favicon.ico' || request.nextUrl.pathname === '/error' || request.nextUrl.pathname === '/not-found' || request.nextUrl.pathname === '/unauthorized' || request.nextUrl.pathname === '/forbidden' || request.nextUrl.pathname === '/maintenance') {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n    }\n    const tenant = extractTenantFromRequest(request);\n    // Add tenant to request headers for server components\n    const requestHeaders = new Headers(request.headers);\n    requestHeaders.set('x-tenant', tenant);\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next({\n        request: {\n            headers: requestHeaders\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vc3JjL2xpYi9taWRkbGV3YXJlL3dpdGgtdGVuYW50LnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF1RDtBQUV2RDs7O0NBR0MsR0FDTSxTQUFTQyx5QkFBeUJDLE9BQW9CO0lBQzNELE1BQU1DLE1BQU1ELFFBQVFFLE9BQU87SUFDM0IsTUFBTUMsWUFBWUYsSUFBSUcsUUFBUSxDQUFDQyxLQUFLLENBQUM7SUFFckMsaUNBQWlDO0lBQ2pDLHdFQUF3RTtJQUN4RSxJQUFJRixVQUFVRyxNQUFNLEdBQUcsS0FBS0gsU0FBUyxDQUFDLEVBQUUsRUFBRTtRQUN4Qyw2REFBNkQ7UUFDN0QsSUFDRSxDQUFDQSxTQUFTLENBQUMsRUFBRSxDQUFDSSxVQUFVLENBQUMsUUFDekJKLFNBQVMsQ0FBQyxFQUFFLEtBQUssU0FDakJBLFNBQVMsQ0FBQyxFQUFFLEtBQUssZUFDakI7WUFDQSxPQUFPQSxTQUFTLENBQUMsRUFBRTtRQUNyQjtJQUNGO0lBRUEsMERBQTBEO0lBQzFELE9BQU87QUFDVDtBQUVBOzs7O0NBSUMsR0FDTSxTQUFTSyxXQUFXUixPQUFvQjtJQUM3Qyw2Q0FBNkM7SUFDN0MsSUFDRUEsUUFBUUUsT0FBTyxDQUFDRSxRQUFRLENBQUNHLFVBQVUsQ0FBQyxhQUNwQ1AsUUFBUUUsT0FBTyxDQUFDRSxRQUFRLENBQUNHLFVBQVUsQ0FBQyxXQUNwQ1AsUUFBUUUsT0FBTyxDQUFDRSxRQUFRLEtBQUssa0JBQzdCSixRQUFRRSxPQUFPLENBQUNFLFFBQVEsS0FBSyxZQUM3QkosUUFBUUUsT0FBTyxDQUFDRSxRQUFRLEtBQUssY0FDN0I7UUFDQSxPQUFPTixxREFBWUEsQ0FBQ1csSUFBSTtJQUMxQjtJQUVBLDZDQUE2QztJQUM3QyxJQUNFVCxRQUFRRSxPQUFPLENBQUNFLFFBQVEsQ0FBQ0csVUFBVSxDQUFDLGFBQ3BDUCxRQUFRRSxPQUFPLENBQUNFLFFBQVEsQ0FBQ0csVUFBVSxDQUFDLFdBQ3BDUCxRQUFRRSxPQUFPLENBQUNFLFFBQVEsS0FBSyxrQkFDN0JKLFFBQVFFLE9BQU8sQ0FBQ0UsUUFBUSxLQUFLLFlBQzdCSixRQUFRRSxPQUFPLENBQUNFLFFBQVEsS0FBSyxnQkFDN0JKLFFBQVFFLE9BQU8sQ0FBQ0UsUUFBUSxLQUFLLG1CQUM3QkosUUFBUUUsT0FBTyxDQUFDRSxRQUFRLEtBQUssZ0JBQzdCSixRQUFRRSxPQUFPLENBQUNFLFFBQVEsS0FBSyxnQkFDN0I7UUFDQSxPQUFPTixxREFBWUEsQ0FBQ1csSUFBSTtJQUMxQjtJQUVBLE1BQU1DLFNBQVNYLHlCQUF5QkM7SUFFeEMsc0RBQXNEO0lBQ3RELE1BQU1XLGlCQUFpQixJQUFJQyxRQUFRWixRQUFRYSxPQUFPO0lBQ2xERixlQUFlRyxHQUFHLENBQUMsWUFBWUo7SUFFL0IsT0FBT1oscURBQVlBLENBQUNXLElBQUksQ0FBQztRQUN2QlQsU0FBUztZQUNQYSxTQUFTRjtRQUNYO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL2VtZXJzb25jaHJpc3RpZS9FbWVyc29uIFN0dWRpby9vcGVuLXN0dWRpby13b3Jrc3BhY2Uvb3Blbi1zdHVkaW8vc3JjL2xpYi9taWRkbGV3YXJlL3dpdGgtdGVuYW50LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcblxuLyoqXG4gKiBFeHRyYWN0IHRlbmFudCBmcm9tIHJlcXVlc3QgVVJMXG4gKiBUaGlzIGhhbmRsZXMgdGVuYW50IHJlc29sdXRpb24gZnJvbSB0aGUgVVJMIHBhdGhcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3RUZW5hbnRGcm9tUmVxdWVzdChyZXF1ZXN0OiBOZXh0UmVxdWVzdCk6IHN0cmluZyB7XG4gIGNvbnN0IHVybCA9IHJlcXVlc3QubmV4dFVybFxuICBjb25zdCBwYXRoUGFydHMgPSB1cmwucGF0aG5hbWUuc3BsaXQoJy8nKVxuXG4gIC8vIEV4cGVjdGVkIGZvcm1hdDogL1t0ZW5hbnRdLy4uLlxuICAvLyBUaGUgdGVuYW50IHNob3VsZCBiZSB0aGUgZmlyc3QgcGFydCBvZiB0aGUgcGF0aCBhZnRlciB0aGUgaW5pdGlhbCAnLydcbiAgaWYgKHBhdGhQYXJ0cy5sZW5ndGggPiAxICYmIHBhdGhQYXJ0c1sxXSkge1xuICAgIC8vIEVuc3VyZSB0aGUgcGF0aCBpcyBub3QgYSBzeXN0ZW0gcGF0aCBsaWtlIF9uZXh0LCBhcGksIGV0Yy5cbiAgICBpZiAoXG4gICAgICAhcGF0aFBhcnRzWzFdLnN0YXJ0c1dpdGgoJ18nKSAmJlxuICAgICAgcGF0aFBhcnRzWzFdICE9PSAnYXBpJyAmJlxuICAgICAgcGF0aFBhcnRzWzFdICE9PSAnZmF2aWNvbi5pY28nXG4gICAgKSB7XG4gICAgICByZXR1cm4gcGF0aFBhcnRzWzFdXG4gICAgfVxuICB9XG5cbiAgLy8gRGVmYXVsdCB0ZW5hbnQgZm9yIGhvbWUgcGFnZSBvciBvdGhlciBub24tdGVuYW50IHJvdXRlc1xuICByZXR1cm4gJ2RlbW8tZ2FsbGVyeSdcbn1cblxuLyoqXG4gKiBUZW5hbnQgbWlkZGxld2FyZSBmdW5jdGlvblxuICogVGhpcyBtaWRkbGV3YXJlIGF0dGFjaGVzIHRoZSB0ZW5hbnQgSUQgdG8gdGhlIHJlcXVlc3QgaGVhZGVyc1xuICogYWxsb3dpbmcgc2VydmVyIGNvbXBvbmVudHMgdG8gYWNjZXNzIGl0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gd2l0aFRlbmFudChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICAvLyBTa2lwIHRlbmFudCByZXNvbHV0aW9uIGZvciBzcGVjaWZpYyByb3V0ZXNcbiAgaWYgKFxuICAgIHJlcXVlc3QubmV4dFVybC5wYXRobmFtZS5zdGFydHNXaXRoKCcvX25leHQnKSB8fFxuICAgIHJlcXVlc3QubmV4dFVybC5wYXRobmFtZS5zdGFydHNXaXRoKCcvYXBpJykgfHxcbiAgICByZXF1ZXN0Lm5leHRVcmwucGF0aG5hbWUgPT09ICcvZmF2aWNvbi5pY28nIHx8XG4gICAgcmVxdWVzdC5uZXh0VXJsLnBhdGhuYW1lID09PSAnL2Vycm9yJyB8fFxuICAgIHJlcXVlc3QubmV4dFVybC5wYXRobmFtZSA9PT0gJy9ub3QtZm91bmQnXG4gICkge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UubmV4dCgpXG4gIH1cblxuICAvLyBTa2lwIHRlbmFudCByZXNvbHV0aW9uIGZvciBzcGVjaWZpYyByb3V0ZXNcbiAgaWYgKFxuICAgIHJlcXVlc3QubmV4dFVybC5wYXRobmFtZS5zdGFydHNXaXRoKCcvX25leHQnKSB8fFxuICAgIHJlcXVlc3QubmV4dFVybC5wYXRobmFtZS5zdGFydHNXaXRoKCcvYXBpJykgfHxcbiAgICByZXF1ZXN0Lm5leHRVcmwucGF0aG5hbWUgPT09ICcvZmF2aWNvbi5pY28nIHx8XG4gICAgcmVxdWVzdC5uZXh0VXJsLnBhdGhuYW1lID09PSAnL2Vycm9yJyB8fFxuICAgIHJlcXVlc3QubmV4dFVybC5wYXRobmFtZSA9PT0gJy9ub3QtZm91bmQnIHx8XG4gICAgcmVxdWVzdC5uZXh0VXJsLnBhdGhuYW1lID09PSAnL3VuYXV0aG9yaXplZCcgfHxcbiAgICByZXF1ZXN0Lm5leHRVcmwucGF0aG5hbWUgPT09ICcvZm9yYmlkZGVuJyB8fFxuICAgIHJlcXVlc3QubmV4dFVybC5wYXRobmFtZSA9PT0gJy9tYWludGVuYW5jZSdcbiAgKSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5uZXh0KClcbiAgfVxuXG4gIGNvbnN0IHRlbmFudCA9IGV4dHJhY3RUZW5hbnRGcm9tUmVxdWVzdChyZXF1ZXN0KVxuXG4gIC8vIEFkZCB0ZW5hbnQgdG8gcmVxdWVzdCBoZWFkZXJzIGZvciBzZXJ2ZXIgY29tcG9uZW50c1xuICBjb25zdCByZXF1ZXN0SGVhZGVycyA9IG5ldyBIZWFkZXJzKHJlcXVlc3QuaGVhZGVycylcbiAgcmVxdWVzdEhlYWRlcnMuc2V0KCd4LXRlbmFudCcsIHRlbmFudClcblxuICByZXR1cm4gTmV4dFJlc3BvbnNlLm5leHQoe1xuICAgIHJlcXVlc3Q6IHtcbiAgICAgIGhlYWRlcnM6IHJlcXVlc3RIZWFkZXJzLFxuICAgIH0sXG4gIH0pXG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZXh0cmFjdFRlbmFudEZyb21SZXF1ZXN0IiwicmVxdWVzdCIsInVybCIsIm5leHRVcmwiLCJwYXRoUGFydHMiLCJwYXRobmFtZSIsInNwbGl0IiwibGVuZ3RoIiwic3RhcnRzV2l0aCIsIndpdGhUZW5hbnQiLCJuZXh0IiwidGVuYW50IiwicmVxdWVzdEhlYWRlcnMiLCJIZWFkZXJzIiwiaGVhZGVycyIsInNldCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(middleware)/./src/lib/middleware/with-tenant.ts\n");

/***/ })

});