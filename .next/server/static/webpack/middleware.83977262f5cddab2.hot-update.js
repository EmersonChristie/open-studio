"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/./src/lib/middleware/with-tenant.ts":
/*!*******************************************!*\
  !*** ./src/lib/middleware/with-tenant.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   extractTenantFromRequest: () => (/* binding */ extractTenantFromRequest),\n/* harmony export */   withTenant: () => (/* binding */ withTenant)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/.pnpm/next@15.2.0_react-dom@19.0.0_react@19.0.0/node_modules/next/dist/esm/api/server.js\");\n\n/**\n * Extract tenant from request URL\n * This handles tenant resolution from the URL path\n */ function extractTenantFromRequest(request) {\n    const url = request.nextUrl;\n    const pathParts = url.pathname.split('/');\n    // Expected format: /[tenant]/...\n    // The tenant should be the first part of the path after the initial '/'\n    if (pathParts.length > 1 && pathParts[1]) {\n        // Ensure the path is not a system path like _next, api, etc.\n        if (!pathParts[1].startsWith('_') && pathParts[1] !== 'api' && pathParts[1] !== 'favicon.ico') {\n            return pathParts[1];\n        }\n    }\n    // Default tenant for home page or other non-tenant routes\n    return 'demo-gallery';\n}\n/**\n * Tenant middleware function\n * This middleware attaches the tenant ID to the request headers\n * allowing server components to access it.\n */ function withTenant(request) {\n    // Skip tenant resolution for specific routes\n    if (request.nextUrl.pathname.startsWith('/_next') || request.nextUrl.pathname.startsWith('/api') || request.nextUrl.pathname === '/favicon.ico' || // Error pages\n    request.nextUrl.pathname === '/error' || request.nextUrl.pathname === '/not-found' || request.nextUrl.pathname === '/unauthorized' || request.nextUrl.pathname === '/forbidden' || request.nextUrl.pathname === '/maintenance') {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n    }\n    const tenant = extractTenantFromRequest(request);\n    // Add tenant to request headers for server components\n    const requestHeaders = new Headers(request.headers);\n    requestHeaders.set('x-tenant', tenant);\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next({\n        request: {\n            headers: requestHeaders\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vc3JjL2xpYi9taWRkbGV3YXJlL3dpdGgtdGVuYW50LnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF1RDtBQUV2RDs7O0NBR0MsR0FDTSxTQUFTQyx5QkFBeUJDLE9BQW9CO0lBQzNELE1BQU1DLE1BQU1ELFFBQVFFLE9BQU87SUFDM0IsTUFBTUMsWUFBWUYsSUFBSUcsUUFBUSxDQUFDQyxLQUFLLENBQUM7SUFFckMsaUNBQWlDO0lBQ2pDLHdFQUF3RTtJQUN4RSxJQUFJRixVQUFVRyxNQUFNLEdBQUcsS0FBS0gsU0FBUyxDQUFDLEVBQUUsRUFBRTtRQUN4Qyw2REFBNkQ7UUFDN0QsSUFDRSxDQUFDQSxTQUFTLENBQUMsRUFBRSxDQUFDSSxVQUFVLENBQUMsUUFDekJKLFNBQVMsQ0FBQyxFQUFFLEtBQUssU0FDakJBLFNBQVMsQ0FBQyxFQUFFLEtBQUssZUFDakI7WUFDQSxPQUFPQSxTQUFTLENBQUMsRUFBRTtRQUNyQjtJQUNGO0lBRUEsMERBQTBEO0lBQzFELE9BQU87QUFDVDtBQUVBOzs7O0NBSUMsR0FDTSxTQUFTSyxXQUFXUixPQUFvQjtJQUM3Qyw2Q0FBNkM7SUFDN0MsSUFDRUEsUUFBUUUsT0FBTyxDQUFDRSxRQUFRLENBQUNHLFVBQVUsQ0FBQyxhQUNwQ1AsUUFBUUUsT0FBTyxDQUFDRSxRQUFRLENBQUNHLFVBQVUsQ0FBQyxXQUNwQ1AsUUFBUUUsT0FBTyxDQUFDRSxRQUFRLEtBQUssa0JBQzdCLGNBQWM7SUFDZEosUUFBUUUsT0FBTyxDQUFDRSxRQUFRLEtBQUssWUFDN0JKLFFBQVFFLE9BQU8sQ0FBQ0UsUUFBUSxLQUFLLGdCQUM3QkosUUFBUUUsT0FBTyxDQUFDRSxRQUFRLEtBQUssbUJBQzdCSixRQUFRRSxPQUFPLENBQUNFLFFBQVEsS0FBSyxnQkFDN0JKLFFBQVFFLE9BQU8sQ0FBQ0UsUUFBUSxLQUFLLGdCQUM3QjtRQUNBLE9BQU9OLHFEQUFZQSxDQUFDVyxJQUFJO0lBQzFCO0lBRUEsTUFBTUMsU0FBU1gseUJBQXlCQztJQUV4QyxzREFBc0Q7SUFDdEQsTUFBTVcsaUJBQWlCLElBQUlDLFFBQVFaLFFBQVFhLE9BQU87SUFDbERGLGVBQWVHLEdBQUcsQ0FBQyxZQUFZSjtJQUUvQixPQUFPWixxREFBWUEsQ0FBQ1csSUFBSSxDQUFDO1FBQ3ZCVCxTQUFTO1lBQ1BhLFNBQVNGO1FBQ1g7SUFDRjtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvZW1lcnNvbmNocmlzdGllL0VtZXJzb24gU3R1ZGlvL29wZW4tc3R1ZGlvLXdvcmtzcGFjZS9vcGVuLXN0dWRpby9zcmMvbGliL21pZGRsZXdhcmUvd2l0aC10ZW5hbnQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xuXG4vKipcbiAqIEV4dHJhY3QgdGVuYW50IGZyb20gcmVxdWVzdCBVUkxcbiAqIFRoaXMgaGFuZGxlcyB0ZW5hbnQgcmVzb2x1dGlvbiBmcm9tIHRoZSBVUkwgcGF0aFxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0cmFjdFRlbmFudEZyb21SZXF1ZXN0KHJlcXVlc3Q6IE5leHRSZXF1ZXN0KTogc3RyaW5nIHtcbiAgY29uc3QgdXJsID0gcmVxdWVzdC5uZXh0VXJsXG4gIGNvbnN0IHBhdGhQYXJ0cyA9IHVybC5wYXRobmFtZS5zcGxpdCgnLycpXG5cbiAgLy8gRXhwZWN0ZWQgZm9ybWF0OiAvW3RlbmFudF0vLi4uXG4gIC8vIFRoZSB0ZW5hbnQgc2hvdWxkIGJlIHRoZSBmaXJzdCBwYXJ0IG9mIHRoZSBwYXRoIGFmdGVyIHRoZSBpbml0aWFsICcvJ1xuICBpZiAocGF0aFBhcnRzLmxlbmd0aCA+IDEgJiYgcGF0aFBhcnRzWzFdKSB7XG4gICAgLy8gRW5zdXJlIHRoZSBwYXRoIGlzIG5vdCBhIHN5c3RlbSBwYXRoIGxpa2UgX25leHQsIGFwaSwgZXRjLlxuICAgIGlmIChcbiAgICAgICFwYXRoUGFydHNbMV0uc3RhcnRzV2l0aCgnXycpICYmXG4gICAgICBwYXRoUGFydHNbMV0gIT09ICdhcGknICYmXG4gICAgICBwYXRoUGFydHNbMV0gIT09ICdmYXZpY29uLmljbydcbiAgICApIHtcbiAgICAgIHJldHVybiBwYXRoUGFydHNbMV1cbiAgICB9XG4gIH1cblxuICAvLyBEZWZhdWx0IHRlbmFudCBmb3IgaG9tZSBwYWdlIG9yIG90aGVyIG5vbi10ZW5hbnQgcm91dGVzXG4gIHJldHVybiAnZGVtby1nYWxsZXJ5J1xufVxuXG4vKipcbiAqIFRlbmFudCBtaWRkbGV3YXJlIGZ1bmN0aW9uXG4gKiBUaGlzIG1pZGRsZXdhcmUgYXR0YWNoZXMgdGhlIHRlbmFudCBJRCB0byB0aGUgcmVxdWVzdCBoZWFkZXJzXG4gKiBhbGxvd2luZyBzZXJ2ZXIgY29tcG9uZW50cyB0byBhY2Nlc3MgaXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3aXRoVGVuYW50KHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIC8vIFNraXAgdGVuYW50IHJlc29sdXRpb24gZm9yIHNwZWNpZmljIHJvdXRlc1xuICBpZiAoXG4gICAgcmVxdWVzdC5uZXh0VXJsLnBhdGhuYW1lLnN0YXJ0c1dpdGgoJy9fbmV4dCcpIHx8XG4gICAgcmVxdWVzdC5uZXh0VXJsLnBhdGhuYW1lLnN0YXJ0c1dpdGgoJy9hcGknKSB8fFxuICAgIHJlcXVlc3QubmV4dFVybC5wYXRobmFtZSA9PT0gJy9mYXZpY29uLmljbycgfHxcbiAgICAvLyBFcnJvciBwYWdlc1xuICAgIHJlcXVlc3QubmV4dFVybC5wYXRobmFtZSA9PT0gJy9lcnJvcicgfHxcbiAgICByZXF1ZXN0Lm5leHRVcmwucGF0aG5hbWUgPT09ICcvbm90LWZvdW5kJyB8fFxuICAgIHJlcXVlc3QubmV4dFVybC5wYXRobmFtZSA9PT0gJy91bmF1dGhvcml6ZWQnIHx8XG4gICAgcmVxdWVzdC5uZXh0VXJsLnBhdGhuYW1lID09PSAnL2ZvcmJpZGRlbicgfHxcbiAgICByZXF1ZXN0Lm5leHRVcmwucGF0aG5hbWUgPT09ICcvbWFpbnRlbmFuY2UnXG4gICkge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UubmV4dCgpXG4gIH1cblxuICBjb25zdCB0ZW5hbnQgPSBleHRyYWN0VGVuYW50RnJvbVJlcXVlc3QocmVxdWVzdClcblxuICAvLyBBZGQgdGVuYW50IHRvIHJlcXVlc3QgaGVhZGVycyBmb3Igc2VydmVyIGNvbXBvbmVudHNcbiAgY29uc3QgcmVxdWVzdEhlYWRlcnMgPSBuZXcgSGVhZGVycyhyZXF1ZXN0LmhlYWRlcnMpXG4gIHJlcXVlc3RIZWFkZXJzLnNldCgneC10ZW5hbnQnLCB0ZW5hbnQpXG5cbiAgcmV0dXJuIE5leHRSZXNwb25zZS5uZXh0KHtcbiAgICByZXF1ZXN0OiB7XG4gICAgICBoZWFkZXJzOiByZXF1ZXN0SGVhZGVycyxcbiAgICB9LFxuICB9KVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImV4dHJhY3RUZW5hbnRGcm9tUmVxdWVzdCIsInJlcXVlc3QiLCJ1cmwiLCJuZXh0VXJsIiwicGF0aFBhcnRzIiwicGF0aG5hbWUiLCJzcGxpdCIsImxlbmd0aCIsInN0YXJ0c1dpdGgiLCJ3aXRoVGVuYW50IiwibmV4dCIsInRlbmFudCIsInJlcXVlc3RIZWFkZXJzIiwiSGVhZGVycyIsImhlYWRlcnMiLCJzZXQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(middleware)/./src/lib/middleware/with-tenant.ts\n");

/***/ })

});